## proportion > 3 days
delays_proportion <- delays %>%
mutate(over_0 = ifelse(specimen_to_report > 0, TRUE, FALSE),
over_1 = ifelse(specimen_to_report > 1, TRUE, FALSE),
over_2 = ifelse(specimen_to_report > 2, TRUE, FALSE),
over_3 = ifelse(specimen_to_report > 3, TRUE, FALSE),
over_4 = ifelse(specimen_to_report > 4, TRUE, FALSE),
over_5 = ifelse(specimen_to_report > 5, TRUE, FALSE)) %>%
group_by(lab_date) %>%
summarise(perc_over_0 = sum(over_0) / n(),
perc_over_1 = sum(over_1) / n(),
perc_over_2 = sum(over_2) / n(),
perc_over_3 = sum(over_3) / n(),
perc_over_4 = sum(over_4) / n(),
perc_over_5 = sum(over_5) / n()) %>%
filter(lab_date > "2020-01-01") %>%
tidyr::pivot_longer(-lab_date) %>%
ggplot(aes(x = lab_date, colour = name)) +
geom_bar(aes(y = value), position = "fill")
delays_proportion
## proportion > 3 days
delays_proportion <- delays %>%
mutate(over_0 = ifelse(specimen_to_report > 0, TRUE, FALSE),
over_1 = ifelse(specimen_to_report > 1, TRUE, FALSE),
over_2 = ifelse(specimen_to_report > 2, TRUE, FALSE),
over_3 = ifelse(specimen_to_report > 3, TRUE, FALSE),
over_4 = ifelse(specimen_to_report > 4, TRUE, FALSE),
over_5 = ifelse(specimen_to_report > 5, TRUE, FALSE)) %>%
group_by(lab_date) %>%
summarise(perc_over_0 = sum(over_0) / n(),
perc_over_1 = sum(over_1) / n(),
perc_over_2 = sum(over_2) / n(),
perc_over_3 = sum(over_3) / n(),
perc_over_4 = sum(over_4) / n(),
perc_over_5 = sum(over_5) / n()) %>%
filter(lab_date > "2020-01-01") %>%
tidyr::pivot_longer(-lab_date) %>%
ggplot(aes(x = lab_date, colour = name)) +
geom_col(aes(y = value), position = "fill")
delays_proportion
## proportion > 3 days
delays_proportion <- delays %>%
mutate(over_0 = ifelse(specimen_to_report > 0, TRUE, FALSE),
over_1 = ifelse(specimen_to_report > 1, TRUE, FALSE),
over_2 = ifelse(specimen_to_report > 2, TRUE, FALSE),
over_3 = ifelse(specimen_to_report > 3, TRUE, FALSE),
over_4 = ifelse(specimen_to_report > 4, TRUE, FALSE),
over_5 = ifelse(specimen_to_report > 5, TRUE, FALSE)) %>%
group_by(lab_date) %>%
summarise(perc_over_0 = sum(over_0) / n(),
perc_over_1 = sum(over_1) / n(),
perc_over_2 = sum(over_2) / n(),
perc_over_3 = sum(over_3) / n(),
perc_over_4 = sum(over_4) / n(),
perc_over_5 = sum(over_5) / n()) %>%
filter(lab_date > "2020-01-01") %>%
tidyr::pivot_longer(-lab_date) %>%
ggplot(aes(x = lab_date, groups = name)) +
geom_col(aes(y = value), position = "fill")
delays_proportion
## proportion > 3 days
delays_proportion <- delays %>%
mutate(over_0 = ifelse(specimen_to_report > 0, TRUE, FALSE),
over_1 = ifelse(specimen_to_report > 1, TRUE, FALSE),
over_2 = ifelse(specimen_to_report > 2, TRUE, FALSE),
over_3 = ifelse(specimen_to_report > 3, TRUE, FALSE),
over_4 = ifelse(specimen_to_report > 4, TRUE, FALSE),
over_5 = ifelse(specimen_to_report > 5, TRUE, FALSE)) %>%
group_by(lab_date) %>%
summarise(perc_over_0 = sum(over_0) / n(),
perc_over_1 = sum(over_1) / n(),
perc_over_2 = sum(over_2) / n(),
perc_over_3 = sum(over_3) / n(),
perc_over_4 = sum(over_4) / n(),
perc_over_5 = sum(over_5) / n()) %>%
filter(lab_date > "2020-01-01") %>%
tidyr::pivot_longer(-lab_date) %>%
ggplot(aes(x = lab_date, groups = name)) +
geom_col(aes(y = value, colour = name))
delays_proportion
## proportion > 3 days
delays_proportion <- delays %>%
mutate(over_0 = ifelse(specimen_to_report > 0, TRUE, FALSE),
over_1 = ifelse(specimen_to_report > 1, TRUE, FALSE),
over_2 = ifelse(specimen_to_report > 2, TRUE, FALSE),
over_3 = ifelse(specimen_to_report > 3, TRUE, FALSE),
over_4 = ifelse(specimen_to_report > 4, TRUE, FALSE),
over_5 = ifelse(specimen_to_report > 5, TRUE, FALSE)) %>%
group_by(lab_date) %>%
summarise(perc_over_0 = sum(over_0) / n(),
perc_over_1 = sum(over_1) / n(),
perc_over_2 = sum(over_2) / n(),
perc_over_3 = sum(over_3) / n(),
perc_over_4 = sum(over_4) / n(),
perc_over_5 = sum(over_5) / n()) %>%
filter(lab_date > "2020-01-01") %>%
tidyr::pivot_longer(-lab_date) %>%
ggplot(aes(x = lab_date)) +
geom_col(aes(y = value, colour = name))
delays_proportion
## proportion > 3 days
delays_proportion <- delays %>%
mutate(under_0 = ifelse(specimen_to_report <= 0, TRUE, FALSE),
over_0 = ifelse(specimen_to_report > 0, TRUE, FALSE),
over_1 = ifelse(specimen_to_report > 1, TRUE, FALSE),
over_2 = ifelse(specimen_to_report > 2, TRUE, FALSE),
over_3 = ifelse(specimen_to_report > 3, TRUE, FALSE),
over_4 = ifelse(specimen_to_report > 4, TRUE, FALSE),
over_5 = ifelse(specimen_to_report > 5, TRUE, FALSE)) %>%
group_by(lab_date) %>%
summarise(perc_under_0 = sum(under_0) / n(),
perc_over_0 = sum(over_0) / n(),
perc_over_1 = sum(over_1) / n(),
perc_over_2 = sum(over_2) / n(),
perc_over_3 = sum(over_3) / n(),
perc_over_4 = sum(over_4) / n(),
perc_over_5 = sum(over_5) / n()) %>%
filter(lab_date > "2020-01-01") %>%
tidyr::pivot_longer(-lab_date) %>%
ggplot(aes(x = lab_date)) +
geom_col(aes(y = value, colour = name))
delays_proportion
## proportion > 3 days
delays %>%
mutate(under_0 = ifelse(specimen_to_report <= 0, TRUE, FALSE),
over_0 = ifelse(specimen_to_report > 0, TRUE, FALSE),
over_1 = ifelse(specimen_to_report > 1, TRUE, FALSE),
over_2 = ifelse(specimen_to_report > 2, TRUE, FALSE),
over_3 = ifelse(specimen_to_report > 3, TRUE, FALSE),
over_4 = ifelse(specimen_to_report > 4, TRUE, FALSE),
over_5 = ifelse(specimen_to_report > 5, TRUE, FALSE)) %>%
group_by(lab_date) %>%
summarise(perc_under_0 = sum(under_0) / n(),
perc_over_0 = sum(over_0) / n(),
perc_over_1 = sum(over_1) / n(),
perc_over_2 = sum(over_2) / n(),
perc_over_3 = sum(over_3) / n(),
perc_over_4 = sum(over_4) / n(),
perc_over_5 = sum(over_5) / n()) %>%
filter(lab_date > "2020-01-01") %>%
tidyr::pivot_longer(-lab_date) %>%
ggplot(aes(x = lab_date)) +
geom_col(aes(y = value, fill = name))
mutate(under_3 = ifelse(specimen_to_report <= 3,
## proportion > 3 days
delays %>%
mutate(under_3 = ifelse(specimen_to_report <= 3, TRUE, FALSE),
over_3 = ifelse(specimen_to_report > 3, TRUE, FALSE),
over_4 = ifelse(specimen_to_report > 4, TRUE, FALSE),
over_5 = ifelse(specimen_to_report > 5, TRUE, FALSE)) %>%
group_by(lab_date) %>%
summarise(perc_under_3 = sum(under_3) / n(),
perc_over_3 = sum(over_3) / n()) %>%
filter(lab_date > "2020-01-01") %>%
tidyr::pivot_longer(-lab_date) %>%
ggplot(aes(x = lab_date)) +
geom_col(aes(y = value, fill = name))
## proportion > 3 days
delays %>%
mutate(under_3 = ifelse(specimen_to_report <= 3, TRUE, FALSE),
over_3 = ifelse(specimen_to_report > 3, TRUE, FALSE),
over_4 = ifelse(specimen_to_report > 4, TRUE, FALSE),
over_5 = ifelse(specimen_to_report > 5, TRUE, FALSE)) %>%
group_by(lab_date) %>%
summarise(perc_under_3 = sum(under_3) / n(),
perc_over_3 = sum(over_3) / n()) %>%
filter(lab_date > "2020-01-01") %>%
tidyr::pivot_longer(-lab_date) %>%
ggplot(aes(x = lab_date)) +
geom_bar(aes(y = value, fill = name))
## proportion > 3 days
delays %>%
mutate(under_3 = ifelse(specimen_to_report <= 3, TRUE, FALSE),
over_3 = ifelse(specimen_to_report > 3, TRUE, FALSE),
over_4 = ifelse(specimen_to_report > 4, TRUE, FALSE),
over_5 = ifelse(specimen_to_report > 5, TRUE, FALSE)) %>%
group_by(lab_date) %>%
summarise(perc_under_3 = sum(under_3) / n(),
perc_over_3 = sum(over_3) / n()) %>%
filter(lab_date > "2020-01-01") %>%
tidyr::pivot_longer(-lab_date) %>%
ggplot(aes(x = lab_date)) +
geom_bar(aes(fill = name))
## proportion > 3 days
delays %>%
mutate(under_3 = ifelse(specimen_to_report <= 3, TRUE, FALSE),
over_3 = ifelse(specimen_to_report > 3, TRUE, FALSE),
over_4 = ifelse(specimen_to_report > 4, TRUE, FALSE),
over_5 = ifelse(specimen_to_report > 5, TRUE, FALSE)) %>%
group_by(lab_date) %>%
summarise(perc_under_3 = sum(under_3) / n(),
perc_over_3 = sum(over_3) / n()) %>%
filter(lab_date > "2020-01-01") %>%
tidyr::pivot_longer(-lab_date) %>%
ggplot(aes(x = lab_date)) +
geom_col(aes(y = value, fill = name))
## proportion > 3 days
delays %>%
mutate(under_3 = ifelse(specimen_to_report < 3, TRUE, FALSE),
at3_4 = ifelse(specimen_to_report >= 3 &
specimen_to_report < 4, TRUE, FALSE),
at4_5 = ifelse(specimen_to_report >= 4 &
specimen_to_report < 5, TRUE, FALSE),
over_5 = ifelse(specimen_to_report >= 5, TRUE, FALSE)) %>%
group_by(lab_date) %>%
summarise(perc_under_3 = sum(under_3) / n(),
perc_at3_4 = sum(at3_4) / n(),
perc_at4_5 = sum(at4_5) / n(),
perc_over_5 = sum(over_5) / n(),) %>%
filter(lab_date > "2020-01-01") %>%
tidyr::pivot_longer(-lab_date) %>%
ggplot(aes(x = lab_date)) +
geom_col(aes(y = value, fill = name))
## proportion > 3 days
delays %>%
mutate(under_3 = ifelse(specimen_to_report < 3, TRUE, FALSE),
at3_4 = ifelse(specimen_to_report >= 3 &
specimen_to_report < 4, TRUE, FALSE),
at4_5 = ifelse(specimen_to_report >= 4 &
specimen_to_report < 5, TRUE, FALSE),
over_5 = ifelse(specimen_to_report >= 5, TRUE, FALSE)) %>%
group_by(lab_date) %>%
summarise(perc_at3_4 = sum(at3_4) / n(),
perc_at4_5 = sum(at4_5) / n(),
perc_over_5 = sum(over_5) / n(),) %>%
filter(lab_date > "2020-01-01") %>%
tidyr::pivot_longer(-lab_date) %>%
ggplot(aes(x = lab_date)) +
geom_col(aes(y = value, fill = name))
## proportion > 3 days
delays %>%
mutate(under_3 = ifelse(specimen_to_report < 3, TRUE, FALSE),
at3_4 = ifelse(specimen_to_report >= 3 &
specimen_to_report < 4, TRUE, FALSE),
at4_5 = ifelse(specimen_to_report >= 4 &
specimen_to_report < 5, TRUE, FALSE),
over_5 = ifelse(specimen_to_report >= 5, TRUE, FALSE)) %>%
group_by(lab_date) %>%
summarise(delay_3_4 = sum(at3_4) / n(),
delay_4_5 = sum(at4_5) / n(),
delay_5_plus = sum(over_5) / n(),) %>%
filter(lab_date > "2020-01-01") %>%
tidyr::pivot_longer(-lab_date) %>%
ggplot(aes(x = lab_date)) +
geom_col(aes(y = value, fill = name))
## proportion > 3 days
delays %>%
mutate(under_3 = ifelse(specimen_to_report < 3, TRUE, FALSE),
at3_4 = ifelse(specimen_to_report >= 3 &
specimen_to_report < 4, TRUE, FALSE),
at4_5 = ifelse(specimen_to_report >= 4 &
specimen_to_report < 5, TRUE, FALSE),
over_5 = ifelse(specimen_to_report >= 5, TRUE, FALSE)) %>%
group_by(lab_date) %>%
summarise(delay_3_4 = sum(at3_4) / n(),
delay_4_5 = sum(at4_5) / n(),
delay_5_plus = sum(over_5) / n(),) %>%
filter(lab_date > "2020-01-01") %>%
tidyr::pivot_longer(-lab_date, names_to = "delay",
values_to = "days") %>%
ggplot(aes(x = lab_date)) +
geom_col(aes(y = value, fill = name))
## proportion > 3 days
delays %>%
mutate(under_3 = ifelse(specimen_to_report < 3, TRUE, FALSE),
at3_4 = ifelse(specimen_to_report >= 3 &
specimen_to_report < 4, TRUE, FALSE),
at4_5 = ifelse(specimen_to_report >= 4 &
specimen_to_report < 5, TRUE, FALSE),
over_5 = ifelse(specimen_to_report >= 5, TRUE, FALSE)) %>%
group_by(lab_date) %>%
summarise(delay_3_4 = sum(at3_4) / n(),
delay_4_5 = sum(at4_5) / n(),
delay_5_plus = sum(over_5) / n(),) %>%
filter(lab_date > "2020-01-01") %>%
tidyr::pivot_longer(-lab_date, names_to = "delay",
values_to = "days") %>%
ggplot(aes(x = lab_date)) +
geom_col(aes(y = days, fill = delay))
## proportion > 3 days
delays %>%
mutate(under_3 = ifelse(specimen_to_report < 3, TRUE, FALSE),
at3_4 = ifelse(specimen_to_report >= 3 &
specimen_to_report < 4, TRUE, FALSE),
at4_5 = ifelse(specimen_to_report >= 4 &
specimen_to_report < 5, TRUE, FALSE),
over_5 = ifelse(specimen_to_report >= 5, TRUE, FALSE)) %>%
group_by(lab_date) %>%
summarise(delay_3_4 = sum(at3_4) / n(),
delay_4_5 = sum(at4_5) / n(),
delay_5_plus = sum(over_5) / n(),) %>%
tidyr::pivot_longer(-lab_date, names_to = "delay",
values_to = "days") %>%
## Plot
filter(lab_date > Sys.Date() - 60) %>%
ggplot(aes(x = lab_date)) +
geom_col(aes(y = days, fill = delay))
## proportion > 3 days
delays %>%
mutate(under_3 = ifelse(specimen_to_report < 3, TRUE, FALSE),
at3_4 = ifelse(specimen_to_report >= 3 &
specimen_to_report < 4, TRUE, FALSE),
at4_5 = ifelse(specimen_to_report >= 4 &
specimen_to_report < 5, TRUE, FALSE),
over_5 = ifelse(specimen_to_report >= 5, TRUE, FALSE)) %>%
group_by(lab_date) %>%
summarise(delay_3_4 = sum(at3_4) / n(),
delay_4_5 = sum(at4_5) / n(),
delay_5_plus = sum(over_5) / n(),) %>%
tidyr::pivot_longer(-lab_date, names_to = "delay",
values_to = "days") %>%
## Plot
filter(lab_date > Sys.Date() - 60) %>%
ggplot(aes(x = lab_date)) +
geom_col(aes(y = days, fill = delay)) +
labs(x = NULL, y = "% days test to lab report")
## proportion > 3 days
delays %>%
mutate(under_3 = ifelse(specimen_to_report < 3, TRUE, FALSE),
at3_4 = ifelse(specimen_to_report >= 3 &
specimen_to_report < 4, TRUE, FALSE),
at4_5 = ifelse(specimen_to_report >= 4 &
specimen_to_report < 5, TRUE, FALSE),
over_5 = ifelse(specimen_to_report >= 5, TRUE, FALSE)) %>%
group_by(lab_date) %>%
summarise(delay_3_4 = sum(at3_4) / n(),
delay_4_5 = sum(at4_5) / n(),
delay_5_plus = sum(over_5) / n(),) %>%
tidyr::pivot_longer(-lab_date, names_to = "delay",
values_to = "days") %>%
## Plot
filter(lab_date > Sys.Date() - 60) %>%
ggplot(aes(x = lab_date)) +
geom_col(aes(y = days, fill = delay)) +
labs(x = NULL, y = "% delays, test to lab report")
## proportion > 3 days
delays %>%
mutate(under_3 = ifelse(specimen_to_report < 3, TRUE, FALSE),
at3_4 = ifelse(specimen_to_report >= 3 &
specimen_to_report < 4, TRUE, FALSE),
at4_5 = ifelse(specimen_to_report >= 4 &
specimen_to_report < 5, TRUE, FALSE),
over_5 = ifelse(specimen_to_report >= 5, TRUE, FALSE)) %>%
group_by(lab_date) %>%
summarise(delay_3_4 = sum(at3_4) / n(),
delay_4_5 = sum(at4_5) / n(),
delay_5_plus = sum(over_5) / n(),) %>%
tidyr::pivot_longer(-lab_date, names_to = "delay",
values_to = "days") %>%
## Plot
filter(lab_date > Sys.Date() - 60) %>%
ggplot(aes(x = lab_date)) +
geom_col(aes(y = days, fill = delay)) +
labs(x = NULL, y = "% tests")
## proportion > 3 days
delays %>%
mutate(under_3 = ifelse(specimen_to_report < 3, TRUE, FALSE),
at3_4 = ifelse(specimen_to_report >= 3 &
specimen_to_report < 4, TRUE, FALSE),
at4_5 = ifelse(specimen_to_report >= 4 &
specimen_to_report < 5, TRUE, FALSE),
over_5 = ifelse(specimen_to_report >= 5, TRUE, FALSE)) %>%
group_by(lab_date) %>%
summarise(delay_3_4 = sum(at3_4) / n(),
delay_4_5 = sum(at4_5) / n(),
delay_5_plus = sum(over_5) / n(),) %>%
tidyr::pivot_longer(-lab_date, names_to = "delay",
values_to = "days") %>%
## Plot
filter(lab_date > Sys.Date() - 60) %>%
ggplot(aes(x = lab_date)) +
geom_col(aes(y = days, fill = delay)) +
labs(x = "Date by lab report", y = "% tests")
## proportion > 3 days
delays %>%
mutate(under_3 = ifelse(specimen_to_report < 3, TRUE, FALSE),
at3_4 = ifelse(specimen_to_report >= 3 &
specimen_to_report < 4, TRUE, FALSE),
at4_5 = ifelse(specimen_to_report >= 4 &
specimen_to_report < 5, TRUE, FALSE),
over_5 = ifelse(specimen_to_report >= 5, TRUE, FALSE)) %>%
group_by(lab_date) %>%
summarise(delay_3_4 = sum(at3_4) / n(),
delay_4_5 = sum(at4_5) / n(),
delay_5_plus = sum(over_5) / n(),) %>%
tidyr::pivot_longer(-lab_date, names_to = "Days delay",
values_to = "days") %>%
## Plot
filter(lab_date > Sys.Date() - 60) %>%
ggplot(aes(x = lab_date)) +
geom_col(aes(y = days, fill = `Days delay`)) +
labs(x = "Date by lab report", y = "% tests")
## proportion > 3 days
delays %>%
mutate(under_3 = ifelse(specimen_to_report < 3, TRUE, FALSE),
at3_4 = ifelse(specimen_to_report >= 3 &
specimen_to_report < 4, TRUE, FALSE),
at4_5 = ifelse(specimen_to_report >= 4 &
specimen_to_report < 5, TRUE, FALSE),
over_5 = ifelse(specimen_to_report >= 5, TRUE, FALSE)) %>%
group_by(lab_date) %>%
summarise(delay_3_4 = sum(at3_4) / n(),
delay_4_5 = sum(at4_5) / n(),
delay_5_plus = sum(over_5) / n(),) %>%
tidyr::pivot_longer(-lab_date, names_to = "Days delay",
values_to = "days") %>%
## Plot
filter(lab_date > Sys.Date() - 60) %>%
ggplot(aes(x = lab_date)) +
geom_col(aes(y = days, fill = `Days delay`)) +
labs(x = "Date by lab report", y = "% tests") +
theme(legend.position = "bottom")
## proportion > 3 days
delays %>%
mutate(under_3 = ifelse(specimen_to_report < 3, TRUE, FALSE),
at3_4 = ifelse(specimen_to_report >= 3 &
specimen_to_report < 4, TRUE, FALSE),
at4_5 = ifelse(specimen_to_report >= 4 &
specimen_to_report < 5, TRUE, FALSE),
over_5 = ifelse(specimen_to_report >= 5, TRUE, FALSE)) %>%
group_by(lab_date) %>%
summarise(delay_3_4 = sum(at3_4) / n(),
delay_4_5 = sum(at4_5) / n(),
delay_5_plus = sum(over_5) / n(),) %>%
tidyr::pivot_longer(-lab_date, names_to = "Days delay",
values_to = "days") %>%
## Plot
filter(lab_date > Sys.Date() - 60) %>%
ggplot(aes(x = lab_date)) +
geom_col(aes(y = days, fill = `Days delay`)) +
labs(x = "Date by lab report", y = "Proportion tests") +
theme(legend.position = "bottom")
## proportion > 3 days
delays %>%
mutate(under_3 = ifelse(specimen_to_report < 3, TRUE, FALSE),
at3_4 = ifelse(specimen_to_report >= 3 &
specimen_to_report < 4, TRUE, FALSE),
at4_5 = ifelse(specimen_to_report >= 4 &
specimen_to_report < 5, TRUE, FALSE),
over_5 = ifelse(specimen_to_report >= 5, TRUE, FALSE)) %>%
group_by(lab_date) %>%
summarise(delay_3_4 = sum(at3_4) / n(),
delay_4_5 = sum(at4_5) / n(),
delay_5_plus = sum(over_5) / n(),) %>%
tidyr::pivot_longer(-lab_date, names_to = "Days delay",
values_to = "days") %>%
## Plot
filter(lab_date > Sys.Date() - 60) %>%
ggplot(aes(x = lab_date)) +
geom_col(aes(y = days, fill = `Days delay`)) +
labs(x = "Date by lab report", y = "Proportion of all tests") +
theme(legend.position = "bottom")
# Check back-filling cases over time
list.files("data")
lapply(data, readRDS)
lapply(files, readRDS)
# Check back-filling cases over time
files <- list.files("data")
lapply(files, readRDS)
# Check back-filling cases over time
files <- list.files("data", full.names = TRUE)
lapply(files, readRDS)
# Check back-filling cases over time
files <- list.files("data", full.names = TRUE)
lapply(files, readRDS)
grep(".rds", files)
files <- files[grep(".rds", files)]
lapply(files, readRDS)
files <- lapply(files, readRDS)
View(files)
View(delays_proportion)
View(delays_time)
View(delays)
## proportion > 3 days
delays %>%
filter(specimen_to_report < 30) %>%
mutate(under_3 = ifelse(specimen_to_report < 3, TRUE, FALSE),
at3 = ifelse(specimen_to_report == 3, TRUE, FALSE),
at4 = ifelse(specimen_to_report == 4, TRUE, FALSE),
over_5 = ifelse(specimen_to_report >= 5, TRUE, FALSE)) %>%
group_by(lab_date) %>%
summarise(delay_3 = sum(at3) / n(),
delay_4 = sum(at4) / n(),
delay_5_plus = sum(over_5) / n()) %>%
tidyr::pivot_longer(-lab_date, names_to = "Days delay",
values_to = "days") %>%
## Plot
filter(lab_date > Sys.Date() - 60) %>%
ggplot(aes(x = lab_date)) +
geom_col(aes(y = days, fill = `Days delay`)) +
labs(x = "Date by lab report", y = "Proportion of all tests") +
theme(legend.position = "bottom")
View(files)
data <- rbind(files[1:5])
View(data)
View(data[[5]][[1]])
data[[5]][[1]]
files <- list("201012", "201004", "200922", "200914", "200823")
View(files)
names(files) <- files
files <- lapply(files, readRDS, paste0(files, ".rds"))
files <- lapply(files, paste0, ".rds"))
files <- lapply(files, paste0, ".rds")
View(files)
View(files)
files <- lapply(files, readRDS, "/data/")
files <- lapply(files, readRDS, "data/")
files <- lapply(files, readRDS,  file = "data/")
View(data)
View(delays)
View(delays_proportion)
View(delays)
