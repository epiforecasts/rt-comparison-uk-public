# Get UK data from which to estimate Rt
require(magrittr)
require(covidregionaldata) # install from Github for latest version


data <- covidregionaldata::get_regional_data(country = "UK", localised_regions = FALSE)
data <- data.table::setDT(data)

# Reshape
keep_cols <- c("date", "region_level_1", "level_1_region_code",
               "newCasesBySpecimenDate", "newCasesByPublishDate", "hosp_new", "deaths_new")
data <- data[, ..keep_cols]

new <- c("date", "region", "region_code", 
         "cases_test", "cases_publish", "cases_hosp", "deaths")

data <- data.table::setnames(data, old = keep_cols, new = new)


# # Separate by region type
# nations <- c("England", "Scotland", "Wales", "Northern Ireland")
# regions <- setdiff(unique(data$region), nations)
# 
# national_data <- data[region %in% nations]
# regional_data <- data[region %in% regions]